% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_num_distribution.R
\name{plot_num_distribution}
\alias{plot_num_distribution}
\title{Plot Numerical Distribution with Multiple Views}
\usage{
plot_num_distribution(
  dt,
  x,
  fill = NULL,
  manual_fill_values = NULL,
  title = "",
  title_size = 15,
  hist_binwidth = NULL,
  hist_n_break = NULL,
  log_trans = scales::new_transform("signed_log2", transform = function(x) sign(x) *
    log2(1 + abs(x)), inverse = function(x) sign(x) * (2^(abs(x)) - 1), breaks =
    scales::pretty_breaks()),
  log_binwidth = NULL,
  log_breaks = c(-2^(0:10), 0, 2^(0:10)),
  curve_important_points = NULL,
  curve_nudge_y = 0,
  curve_breaks_x = NULL,
  curve_limits = NULL
)
}
\arguments{
\item{dt}{A data.table object containing the data to be plotted.}

\item{x}{The column name (unquoted) to be plotted on the x-axis.}

\item{fill}{Optional column name (unquoted) for grouping/coloring the data.
Default is NULL.}

\item{manual_fill_values}{Optional character vector of custom colors for fill
groups. Should match the number of groups in the fill variable. Default is NULL.}

\item{title}{Character string for the overall plot title. Default is empty string.}

\item{title_size}{Numeric value for the title font size. Default is 15.}

\item{hist_binwidth}{Numeric value for histogram bin width in the standard
histogram. Default is NULL (automatic binning).}

\item{hist_n_break}{Integer for the number of breaks on the x-axis of the
standard histogram. Default is NULL.}

\item{log_trans}{A transformation object for the log-transformed histogram.
Default uses a signed log2 transformation that handles negative values.}

\item{log_binwidth}{Numeric value for histogram bin width in the log-transformed
histogram. Default is NULL.}

\item{log_breaks}{Numeric vector specifying break points for the log-transformed
x-axis. Default covers powers of 2 from -2^10 to 2^10, including 0.}

\item{curve_important_points}{Numeric vector of x-values to highlight on the
ECDF curve with points and percentage labels. Default is NULL.}

\item{curve_nudge_y}{Numeric value to adjust the vertical position of percentage
labels on important points. Default is 0.}

\item{curve_breaks_x}{Numeric vector specifying custom x-axis breaks for the
ECDF plot. Default is NULL (automatic breaks).}

\item{curve_limits}{Numeric vector of length 2 specifying x-axis limits for
the ECDF plot. Default is NULL (automatic limits).}
}
\value{
A patchwork object containing three ggplot2 plots arranged vertically:
\itemize{
\item Top: Standard histogram
\item Middle: Log-transformed histogram
\item Bottom: ECDF curve
}
}
\description{
Creates a comprehensive visualization of numerical distributions using three
different plot types: a standard histogram, a log-transformed histogram, and
an empirical cumulative distribution function (ECDF) curve. The plots are
arranged vertically using patchwork.
}
\details{
The function creates three complementary views of the same numerical distribution:
\itemize{
\item \strong{Standard Histogram}: Shows the raw distribution of values
\item \strong{Log-transformed Histogram}: Uses a signed log2 transformation
to better visualize data with wide ranges or skewed distributions
\item \strong{ECDF Curve}: Shows the cumulative proportion of observations
below each value, useful for understanding percentiles
}

When a fill variable is provided, the histograms show overlapping distributions
with transparency, while the ECDF shows separate curves for each group.

The signed log2 transformation handles both positive and negative values using:
\code{sign(x) * log2(1 + abs(x))} for the forward transformation and
\code{sign(x) * (2^(abs(x)) - 1)} for the inverse.
}
\examples{
library(data.table)
library(ggplot2)
library(patchwork)

# Basic usage with single variable
dt <- data.table(values = rnorm(1000, mean = 100, sd = 50))
plot_num_distribution(dt, values, title = "Normal Distribution")

# With grouping variable
dt <- data.table(
  values = c(rnorm(500, 50, 20), rnorm(500, 150, 30)),
  group = rep(c("A", "B"), each = 500)
)
plot_num_distribution(dt, values, fill = group,
                      title = "Distribution by Group",
                      manual_fill_values = c("red", "blue"))

# With important points highlighted on ECDF
plot_num_distribution(dt, values,
                      curve_important_points = c(50, 100, 150),
                      title = "Distribution with Key Points")

}
\seealso{
\code{\link[ggplot2]{geom_histogram}}, \code{\link[ggplot2]{stat_ecdf}},
\code{\link[patchwork]{plot_annotation}}
}
